<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="基于代理Dao的CRUD实现和源码分析，传统Dao实体类在Mybatis中的使用。以及Mybatis中输入参数的深入和输出结果的封装。">
<meta property="og:type" content="article">
<meta property="og:title" content="mybatis#3-parameter和result设置">
<meta property="og:url" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/index.html">
<meta property="og:site_name" content="摘星">
<meta property="og:description" content="基于代理Dao的CRUD实现和源码分析，传统Dao实体类在Mybatis中的使用。以及Mybatis中输入参数的深入和输出结果的封装。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/%E8%87%AA%E5%AE%9A%E4%B9%89mybatis%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E5%9B%BE.png">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/1585818212020.png">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/1585818338947.png">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/1585818768890.png">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/1585819567465.png">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/1585819602427.png">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/1585821351024.png">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/1585821563448.png">
<meta property="og:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/1585821805692.png">
<meta property="article:published_time" content="2020-03-28T01:34:33.000Z">
<meta property="article:modified_time" content="2021-05-19T02:14:10.582Z">
<meta property="article:author" content="摘星">
<meta property="article:tag" content="java">
<meta property="article:tag" content="反射">
<meta property="article:tag" content="JDBC">
<meta property="article:tag" content="mybatis">
<meta property="article:tag" content="代理模式">
<meta property="article:tag" content="映射">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/%E8%87%AA%E5%AE%9A%E4%B9%89mybatis%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E5%9B%BE.png">

<link rel="canonical" href="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>mybatis#3-parameter和result设置 | 摘星</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">摘星</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/28/mybatis-3-parameter%E5%92%8Cresult%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="摘星">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="摘星">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          mybatis#3-parameter和result设置
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-28 09:34:33" itemprop="dateCreated datePublished" datetime="2020-03-28T09:34:33+08:00">2020-03-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mybatis/" itemprop="url" rel="index"><span itemprop="name">mybatis</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>基于代理Dao的CRUD实现和源码分析，传统Dao实体类在Mybatis中的使用。以及Mybatis中输入参数的深入和输出结果的封装。</p>
<span id="more"></span>

<h1 id="回顾自定义流程"><a href="#回顾自定义流程" class="headerlink" title="回顾自定义流程"></a>回顾自定义流程</h1><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><p><img src="%E8%87%AA%E5%AE%9A%E4%B9%89mybatis%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="自定义mybatis开发流程图"></p>
<h2 id="环境搭建步骤"><a href="#环境搭建步骤" class="headerlink" title="环境搭建步骤"></a>环境搭建步骤</h2><p>第一步:创建 maven 工程<br>第二步:导入坐标<br>第三步:编写必要代码(实体类和持久层接口)<br>第四步:编写 <code>SqlMapConfig.xml</code><br>第五步:编写映射配置文件<br>第六步:编写测试类</p>
<h1 id="基于代理-Dao-实现-CRUD-操作"><a href="#基于代理-Dao-实现-CRUD-操作" class="headerlink" title="基于代理 Dao 实现 CRUD 操作"></a>基于代理 Dao 实现 CRUD 操作</h1><p>使用要求:<br>1、持久层接口和持久层接口的映射配置必须在相同的包下<br>2、持久层映射配置中 mapper 标签的 namespace 属性取值必须是持久层接口的全限定类名<br>3、SQL 语句的配置标签&lt;select&gt;,&lt;insert&gt;,&lt;delete&gt;,&lt;update&gt;的 id 属性必须和持久层接口的<br>方法名相同。</p>
<h2 id="根据-ID-查询"><a href="#根据-ID-查询" class="headerlink" title="根据 ID 查询"></a>根据 ID 查询</h2><h3 id="持久层接口"><a href="#持久层接口" class="headerlink" title="持久层接口"></a>持久层接口</h3><pre><code class="java">/**
* 根据 id 查询
* @param userId
* @return
*/
User findById(Integer userId);
</code></pre>
<h3 id="映射配置文件"><a href="#映射配置文件" class="headerlink" title="映射配置文件"></a>映射配置文件</h3><pre><code class="xml">&lt;!-- 根据 id 查询 --&gt;
&lt;select id=&quot;findById&quot; resultType=&quot;uestc.zhangkx.domain.User&quot; parameterType=&quot;int&quot;&gt;
select * from user where id = #&#123;uid&#125;
&lt;/select&gt;
</code></pre>
<p><strong>细节:</strong></p>
<ul>
<li><strong>resultType 属性</strong>——用于指定结果集的类型。</li>
<li><strong>parameterType 属性</strong>——用于指定传入参数的类型。</li>
<li><strong>sql 语句中使用#{}字符</strong>——它代表占位符,相当于原来 jdbc 部分所学的?,都是用于执行语句时替换实际的数据。具体的数据是由#{}里面的内容决定的。</li>
<li><strong>#{}中内容的写法</strong>——由于数据类型是基本类型,所以此处可以随意写。</li>
</ul>
<h3 id="测试方法"><a href="#测试方法" class="headerlink" title="测试方法"></a>测试方法</h3><pre><code class="java">/**
*
* &lt;p&gt;Title: MybastisCRUDTest&lt;/p&gt;
* &lt;p&gt;Description: 测试 mybatis 的 crud 操作&lt;/p&gt;
*/
public class MybastisCRUDTest &#123;
    private InputStream in ;
    private SqlSessionFactory factory;
    private SqlSession session;
    private IUserDao userDao;

    @Before//在测试方法执行之前执行
    public void init()throws Exception &#123;
        //1.读取配置文件
        in = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;);
        //2.创建构建者对象
        SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();
        //3.创建 SqlSession 工厂对象
        factory = builder.build(in);
        //4.创建 SqlSession 对象
        session = factory.openSession();
        //5.创建 Dao 的代理对象
        userDao = session.getMapper(IUserDao.class);
    &#125;

    @After//在测试方法执行完成之后执行
    public void destroy() throws Exception&#123;
        //提交事务
        session.commit();
        //7.释放资源
        session.close();
        in.close();
    &#125;
    
    @Test
    public void testFindOne() &#123;
        //6.执行操作
        User user = userDao.findById(41);
        System.out.println(user);
    &#125;
</code></pre>
<h2 id="保存操作"><a href="#保存操作" class="headerlink" title="保存操作"></a>保存操作</h2><h3 id="持久层接口-1"><a href="#持久层接口-1" class="headerlink" title="持久层接口"></a>持久层接口</h3><pre><code class="java">/**
* 保存用户
* @param user
* @return
 影响数据库记录的行数
*/
int saveUser(User user);
</code></pre>
<h3 id="映射配置文件-1"><a href="#映射配置文件-1" class="headerlink" title="映射配置文件"></a>映射配置文件</h3><pre><code class="xml">&lt;!-- 保存用户--&gt;
&lt;insert id=&quot;saveUser&quot; parameterType=&quot;uestc.zhangkx.domain.User&quot;&gt;
    insert into user(username,birthday,sex,address)
    values(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)
&lt;/insert&gt;
</code></pre>
<p><strong>细节:</strong></p>
<ul>
<li><strong>parameterType 属性</strong>——代表参数的类型,因为我们要传入的是一个类的对象,所以类型就写类的全名称。</li>
<li><strong>sql 语句中使用#{}字符</strong>——它代表占位符,相当于原来 jdbc 部分所学的?,都是用于执行语句时替换实际的数据。具体的数据是由#{}里面的内容决定的。</li>
</ul>
<p><strong>#{}中内容的写法:</strong><br>由于我们保存方法的参数是 一个 User 对象,此处要写 User 对象中的属性名称。它用的是 <strong>ognl 表达式</strong>。</p>
<p><strong>ognl 表达式:</strong><br>它是 apache 提供的一种表达式语言,全称是:Object Graphic Navigation Language（ 对象图导航语言）它是按照一定的语法格式来获取数据的。</p>
<p>语法格式就是使用 <code>#&#123;对象.对象&#125;</code>的方式</p>
<p><code>#&#123;user.username&#125;</code>它会先去找 user 对象,然后在 user 对象中找到 username 属性,并调用<code>getUsername()</code>方法把值取出来。但是我们在 parameterType 属性上指定了实体类名称,所以可以省略<code> user.</code>而直接写 <code>username</code>。</p>
<h3 id="测试方法-1"><a href="#测试方法-1" class="headerlink" title="测试方法"></a>测试方法</h3><pre><code class="java">@Test
public void testSave()&#123;
    User user = new User();
    user.setUsername(&quot;modify User property&quot;);
    user.setAddress(&quot;北京市顺义区&quot;);
    user.setSex(&quot;男&quot;);
    user.setBirthday(new Date());
    System.out.println(&quot;保存操作之前:&quot;+user);
    //5.执行保存方法
    userDao.saveUser(user);
    System.out.println(&quot;保存操作之后:&quot;+user);
&#125;
</code></pre>
<p><em>打开 Mysql 数据库发现并没有添加任何记录,原因是什么?</em><br>这一点和 jdbc 是一样的,我们在实现增删改时一定要去控制事务的提交,那么在 mybatis 中如何控制事务提交呢?<br>可以使用:<code>session.commit();</code>来实现事务提交。加入事务提交后的代码如下:</p>
<pre><code class="java">@After//在测试方法执行完成之后执行
public void destroy() throws Exception&#123;
    session.commit();
    //7.释放资源
    session.close();
    in.close();
&#125;
</code></pre>
<h3 id="问题扩展-新增用户-id-的返回值"><a href="#问题扩展-新增用户-id-的返回值" class="headerlink" title="问题扩展:新增用户 id 的返回值"></a>问题扩展:新增用户 id 的返回值</h3><p>新增用户后,同时还要返回当前新增用户的 id 值,因为 id 是由数据库的自动增长来实现的,所以就相当于我们要在新增后将自动增长<code>auto_increment</code>的值返回。</p>
<pre><code class="xml">&lt;insert id=&quot;saveUser&quot; parameterType=&quot;USER&quot;&gt;
    &lt;!-- 配置保存时获取插入的 id --&gt;
    &lt;selectKey keyColumn=&quot;id&quot; keyProperty=&quot;id&quot; resultType=&quot;int&quot;&gt;
        select last_insert_id();
    &lt;/selectKey&gt;
    insert into user(username,birthday,sex,address)
    values(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)
&lt;/insert&gt;
</code></pre>
<h2 id="用户更新"><a href="#用户更新" class="headerlink" title="用户更新"></a>用户更新</h2><h3 id="持久层接口-2"><a href="#持久层接口-2" class="headerlink" title="持久层接口"></a>持久层接口</h3><pre><code class="java">/**
* 更新用户
* @param user
* @return 影响数据库记录的行数
*/
int updateUser(User user);
</code></pre>
<h3 id="映射配置文件-2"><a href="#映射配置文件-2" class="headerlink" title="映射配置文件"></a>映射配置文件</h3><pre><code class="xml">&lt;!-- 更新用户 --&gt;
&lt;update id=&quot;updateUser&quot; parameterType=&quot;uestc.zhangkx.domain.User&quot;&gt;
    update user set username=#&#123;username&#125;,birthday=#&#123;birthday&#125;,sex=#&#123;sex&#125;,
    address=#&#123;address&#125; where id=#&#123;id&#125;
&lt;/update&gt;
</code></pre>
<h3 id="测试方法-2"><a href="#测试方法-2" class="headerlink" title="测试方法"></a>测试方法</h3><pre><code class="java">@Test
public void testUpdateUser()throws Exception&#123;
    //1.根据 id 查询
    User user = userDao.findById(52);
    //2.更新操作
    user.setAddress(&quot;北京市顺义区&quot;);
    int res = userDao.updateUser(user);
    System.out.println(res);
&#125;
</code></pre>
<h2 id="用户删除"><a href="#用户删除" class="headerlink" title="用户删除"></a>用户删除</h2><h3 id="持久层接口-3"><a href="#持久层接口-3" class="headerlink" title="持久层接口"></a>持久层接口</h3><pre><code class="java">/**
* 根据 id 删除用户
* @param userId
* @return
*/
int deleteUser(Integer userId);
</code></pre>
<h3 id="映射配置文件-3"><a href="#映射配置文件-3" class="headerlink" title="映射配置文件"></a>映射配置文件</h3><pre><code class="xml">&lt;!-- 删除用户 --&gt;
&lt;delete id=&quot;deleteUser&quot; parameterType=&quot;java.lang.Integer&quot;&gt;
    delete from user where id = #&#123;uid&#125;
&lt;/delete&gt;
</code></pre>
<h3 id="测试方法-3"><a href="#测试方法-3" class="headerlink" title="测试方法"></a>测试方法</h3><pre><code class="java">@Test
public void testDeleteUser() throws Exception &#123;
    //6.执行操作
    int res = userDao.deleteUser(52);
    System.out.println(res);
&#125;
</code></pre>
<h2 id="用户模糊查询"><a href="#用户模糊查询" class="headerlink" title="用户模糊查询"></a>用户模糊查询</h2><h3 id="持久层接口-4"><a href="#持久层接口-4" class="headerlink" title="持久层接口"></a>持久层接口</h3><pre><code class="java">/**
* 根据名称模糊查询
* @param username
* @return
*/
List&lt;User&gt; findByName(String username);
</code></pre>
<h3 id="映射配置文件-4"><a href="#映射配置文件-4" class="headerlink" title="映射配置文件"></a>映射配置文件</h3><pre><code class="xml">&lt;!-- 根据名称模糊查询 --&gt;
&lt;select id=&quot;findByName&quot; resultType=&quot;uestc.zhangkx.domain.User&quot; parameterType=&quot;String&quot;&gt;
select * from user where username like #&#123;username&#125;
&lt;/select&gt;
</code></pre>
<h3 id="测试方法-4"><a href="#测试方法-4" class="headerlink" title="测试方法"></a>测试方法</h3><pre><code class="java">@Test
public void testFindByName()&#123;
    //5.执行查询一个方法
    List&lt;User&gt; users = userDao.findByName(&quot;%王%&quot;);
    for(User user : users)&#123;
        System.out.println(user);
    &#125;
&#125;
</code></pre>
<p>在控制台输出的执行 SQL 语句如下:</p>
<p><img src="1585818212020.png" alt="1585818212020"></p>
<p>我们在配置文件中没有加入%来作为模糊查询的条件,所以在传入字符串实参时,就需要给定模糊查询的标识%。配置文件中的<code>#&#123;username&#125;</code>也只是一个占位符,所以 SQL 语句显示为“?”。</p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><h4 id="模糊查询的另一种配置方式"><a href="#模糊查询的另一种配置方式" class="headerlink" title="模糊查询的另一种配置方式"></a>模糊查询的另一种配置方式</h4><p>第一步:修改 SQL 语句的配置,配置如下:</p>
<pre><code class="xml">&lt;!-- 根据名称模糊查询 --&gt;
&lt;select id=&quot;findByName&quot; parameterType=&quot;string&quot; resultType=&quot;uestc.zhangkx.domain.User&quot;&gt;
    select * from user where username like &#39;%$&#123;value&#125;%&#39;
&lt;/select&gt;
</code></pre>
<p>我们在上面将原来的<code>#&#123;&#125;</code>占位符,改成了<code>$&#123;value&#125;</code>。注意如果用模糊查询的这种写法,那么<code>$&#123;value&#125;</code>的写法就是固定的,不能写成其它名字。</p>
<p>第二步:测试,如下:</p>
<pre><code class="java">/**
* 测试模糊查询操作
*/
@Test
public void testFindByName()&#123;
    //5.执行查询一个方法
    List&lt;User&gt; users = userDao.findByName(&quot;王&quot;);
    for(User user : users)&#123;
        System.out.println(user);
    &#125;
&#125;
</code></pre>
<p>在控制台输出的执行 SQL 语句如下:</p>
<p><img src="1585818338947.png" alt="1585818338947"></p>
<p>可以发现,我们在程序代码中就不需要加入模糊查询的匹配符%了,这两种方式的实现效果是一样的,但执行的语句是不一样的。</p>
<h4 id="与-的区别"><a href="#与-的区别" class="headerlink" title="#{}与${}的区别"></a>#{}与${}的区别</h4><p><strong>#{}表示一个占位符号</strong></p>
<p>通过<code>#&#123;&#125;</code>可以实现<code> preparedStatement</code> 向占位符中设置值,自动进行 java 类型和 jdbc 类型转换,<code>#&#123;&#125;</code>可以有效防止 sql 注入。 </p>
<p><code>#&#123;&#125;</code>可以接收简单类型值或 pojo 属性值。 如果 <code>parameterType</code>传输单个简单类型值,<code>#&#123;&#125;</code>括号中可以是 value 或其它名称。</p>
<p><strong>${}表示拼接 sql 串</strong></p>
<p>通过<code>$&#123;&#125;</code>可以将<code>parameterType</code>传入的内容拼接在 sql 中且不进行 jdbc 类型转换, <code>$&#123;&#125;</code>可以接收简单类型值或 <code>pojo </code>属性值,如果 <code>parameterType</code> 传输单个简单类型值,<code>$&#123;&#125;</code>括号中只能是<code>value</code>。</p>
<h4 id="模糊查询的-value-源码分析"><a href="#模糊查询的-value-源码分析" class="headerlink" title="模糊查询的${value}源码分析"></a>模糊查询的${value}源码分析</h4><p>我们一起来看 TextSqlNode 类的源码:</p>
<p><img src="1585818768890.png" alt="1585818768890"></p>
<p>这就说明了源码中指定了读取的 key 的名字就是”value”,所以我们在绑定参数时就只能叫 value 的名字<br>了。</p>
<h2 id="查询使用聚合函数"><a href="#查询使用聚合函数" class="headerlink" title="查询使用聚合函数"></a>查询使用聚合函数</h2><h3 id="持久层接口-5"><a href="#持久层接口-5" class="headerlink" title="持久层接口"></a>持久层接口</h3><pre><code class="java">/**
* 查询总记录条数
* @return
*/
int findTotal();
</code></pre>
<h3 id="映射配置文件-5"><a href="#映射配置文件-5" class="headerlink" title="映射配置文件"></a>映射配置文件</h3><pre><code class="xml">&lt;!-- 查询总记录条数 --&gt;
&lt;select id=&quot;findTotal&quot; resultType=&quot;int&quot;&gt;
    select count(*) from user;
&lt;/select&gt;
</code></pre>
<h3 id="测试方法-5"><a href="#测试方法-5" class="headerlink" title="测试方法"></a>测试方法</h3><pre><code class="java">@Test
public void testFindTotal() throws Exception &#123;
    //6.执行操作
    int res = userDao.findTotal();
    System.out.println(res);
&#125;
</code></pre>
<h2 id="Mybatis-与-JDBC-编程的比较"><a href="#Mybatis-与-JDBC-编程的比较" class="headerlink" title="Mybatis 与 JDBC 编程的比较"></a>Mybatis 与 JDBC 编程的比较</h2><p><em>1.数据库链接创建、释放频繁造成系统资源浪费从而影响系统性能,如果使用数据库链接池可解决此问题。</em><br>在<code>SqlMapConfig.xml</code>中配置数据链接池,使用连接池管理数据库链接。</p>
<p><em>2.Sql 语句写在代码中造成代码不易维护,实际应用 sql 变化的可能较大,sql 变动需要改变 java 代码。</em><br>将 Sql 语句配置在 <code>XXXXmapper.xml</code> 文件中与 java 代码分离。</p>
<p><em>3.向 sql 语句传参数麻烦,因为 sql 语句的 where 条件不一定,可能多也可能少,占位符需要和参数对应。</em><br>Mybatis 自动将 java 对象映射至 sql 语句,通过<code> statement</code> 中的 <code>parameterType </code>定义输入参数的类型。</p>
<p><em>4.对结果集解析麻烦,sql 变化导致解析代码变化,且解析前需要遍历,如果能将数据库记录封装成 pojo 对象解析比较方便。</em><br>Mybatis 自动将 sql 执行结果映射至 java 对象,通过 <code>statement </code>中的<code> resultType</code> 定义输出结果的类型。</p>
<h1 id="Mybatis-的输入参数深入"><a href="#Mybatis-的输入参数深入" class="headerlink" title="Mybatis 的输入参数深入"></a>Mybatis 的输入参数深入</h1><h2 id="parameterType-配置参数"><a href="#parameterType-配置参数" class="headerlink" title="parameterType 配置参数"></a>parameterType 配置参数</h2><h3 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h3><p>介绍过SQL 语句传参,使用标签的<code> parameterType</code> 属性来设定。该属性的取值可以是基本类型,引用类型(例如:String 类型),还可以是实体类类型(POJO 类)。同时也可以使用实体类的包装类,现在将介绍如何使用实体类的包装类作为参数传递。</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>基本类型和String：我们可以直接写类型名称,也可以使用<code>包名.类名</code>的方式,例如:<code>java.lang.String</code>。<br>实体类类型：只能使用全限定类名。</p>
<p>究其原因,是 mybaits 在加载时已经把常用的数据类型注册了别名,从而我们在使用时可以不写包名,而我们的是实体类并没有注册别名,所以必须写全限定类名。在 mybatis 的官方文档的说明(第 19 页)</p>
<p><img src="1585819567465.png" alt="1585819567465"></p>
<p>这些都是支持的默认别名。我们也可以从源码角度来看它们分别都是如何定义出来的。<br>可以参考 TypeAliasRegistery.class 的源码：</p>
<p><img src="1585819602427.png" alt="1585819602427"></p>
<h2 id="传递-pojo-包装对象"><a href="#传递-pojo-包装对象" class="headerlink" title="传递 pojo 包装对象"></a>传递 pojo 包装对象</h2><p>开发中通过 pojo 传递查询条件 ,查询条件是综合的查询条件,不仅包括用户查询条件还包括其它的查询条件(比如将用户购买商品信息也作为查询条件),这时可以使用包装对象传递输入参数。Pojo 类中包含 pojo。</p>
<p><em>需求:根据用户名查询用户信息,查询条件放到 QueryVo 的 user 属性中。</em></p>
<h3 id="编写-QueryVo"><a href="#编写-QueryVo" class="headerlink" title="编写 QueryVo"></a>编写 QueryVo</h3><pre><code class="java">/**
*
* &lt;p&gt;Title: QueryVo&lt;/p&gt;
* &lt;p&gt;Description: 查询条件对象&lt;/p&gt;
*/
public class QueryVo implements Serializable &#123;
    private User user;
    public User getUser() &#123;
        return user;
    &#125;
&#125;
public void setUser(User user) &#123;
    this.user = user;
&#125;
</code></pre>
<h3 id="持久层接口-6"><a href="#持久层接口-6" class="headerlink" title="持久层接口"></a>持久层接口</h3><pre><code class="java">/**
*
* &lt;p&gt;Title: IUserDao&lt;/p&gt;
* &lt;p&gt;Description: 用户的业务层接口&lt;/p&gt;
*/
public interface IUserDao &#123;
&#125;
/**
* 根据 QueryVo 中的条件查询用户
* @param vo
* @return
*/
List&lt;User&gt; findByVo(QueryVo vo);
</code></pre>
<h3 id="映射配置文件-6"><a href="#映射配置文件-6" class="headerlink" title="映射配置文件"></a>映射配置文件</h3><pre><code class="xml">&lt;!-- 根据用户名称模糊查询,参数变成一个 QueryVo 对象了 --&gt;
&lt;select id=&quot;findByVo&quot; resultType=&quot;uestc.zhangkx.domain.User&quot;
        parameterType=&quot;uestc.zhangkx.domain.QueryVo&quot;&gt;
    select * from user where username like #&#123;user.username&#125;;
&lt;/select&gt;
</code></pre>
<h3 id="测试包装类"><a href="#测试包装类" class="headerlink" title="测试包装类"></a>测试包装类</h3><pre><code class="java">@Test
public void testFindByQueryVo() &#123;
    QueryVo vo = new QueryVo();
    User user = new User();
    user.setUserName(&quot;%王%&quot;);
    vo.setUser(user);
    List&lt;User&gt; users = userDao.findByVo(vo);
    for(User u : users) &#123;
        System.out.println(u);
    &#125;
&#125;
</code></pre>
<h1 id="Mybatis-的输出结果封装"><a href="#Mybatis-的输出结果封装" class="headerlink" title="Mybatis 的输出结果封装"></a>Mybatis 的输出结果封装</h1><h2 id="resultType-配置结果类型"><a href="#resultType-配置结果类型" class="headerlink" title="resultType 配置结果类型"></a>resultType 配置结果类型</h2><p><code>resultType</code> 属性可以指定结果集的类型,它支持基本类型和实体类类型。<br>需要注意的是,它和 <code>parameterType</code> 一样,如果注册过类型别名的,可以直接使用别名。没有注册过的必须使用全限定类名。例如:我们的实体类此时必须是全限定类名(今天最后一个章节会讲解如何配置实体类的别名)同时,当是实体类名称是,还有一个要求,实体类中的属性名称必须和查询语句中的列名保持一致,否则无法实现封装。</p>
<h3 id="基本类型示例"><a href="#基本类型示例" class="headerlink" title="基本类型示例"></a>基本类型示例</h3><h4 id="Integer"><a href="#Integer" class="headerlink" title="Integer"></a>Integer</h4><pre><code class="java">/**
* 查询总记录条数
* @return
*/
int findTotal();
</code></pre>
<pre><code class="xml">&lt;!-- 查询总记录条数 --&gt;
&lt;select id=&quot;findTotal&quot; resultType=&quot;int&quot;&gt;
select count(*) from user;
&lt;/select&gt;
</code></pre>
<h4 id="User"><a href="#User" class="headerlink" title="User"></a>User</h4><pre><code class="java">/**
* 查询所有用户
* @return
*/
List&lt;User&gt; findAll();
</code></pre>
<pre><code class="xml">&lt;!-- 配置查询所有操作 --&gt;
&lt;select id=&quot;findAll&quot; resultType=&quot;uestc.zhangkx.domain.User&quot;&gt;
select * from user
&lt;/select&gt;
</code></pre>
<h3 id="特殊类型示例"><a href="#特殊类型示例" class="headerlink" title="特殊类型示例"></a>特殊类型示例</h3><h4 id="修改实体类"><a href="#修改实体类" class="headerlink" title="修改实体类"></a>修改实体类</h4><p>实体类代码如下:(此时的实体类属性和数据库表的列名已经不一致了)</p>
<pre><code class="java">/**
*
* &lt;p&gt;Title: User&lt;/p&gt;
* &lt;p&gt;Description: 用户的实体类&lt;/p&gt;
*/
public class User implements Serializable &#123;
    private Integer userId;
    private String userName;
    private Date userBirthday;
    private String userSex;
    private String userAddress;
    public Integer getUserId() &#123;
        return userId;
    &#125;
    public void setUserId(Integer userId) &#123;
        this.userId = userId;
    &#125;
    public String getUserName() &#123;
        return userName;
    &#125;
    public void setUserName(String userName) &#123;
        this.userName = userName;
    &#125;
    public Date getUserBirthday() &#123;
        return userBirthday;
    &#125;
    public void setUserBirthday(Date userBirthday) &#123;
        this.userBirthday = userBirthday;
    &#125;
    public String getUserSex() &#123;
        return userSex;
    &#125;
    public void setUserSex(String userSex) &#123;
        this.userSex = userSex;
    &#125;
    public String getUserAddress() &#123;
        return userAddress;
    &#125;
    public void setUserAddress(String userAddress) &#123;
        this.userAddress = userAddress;
    &#125;
    @Override
    public String toString() &#123;
        return &quot;User [userId=&quot; + userId + &quot;, userName=&quot; + userName + &quot;, userBirthday=&quot;
            + userBirthday + &quot;, userSex=&quot;
            + userSex + &quot;, userAddress=&quot; + userAddress + &quot;]&quot;;
    &#125;
&#125;
</code></pre>
<p>Dao接口：</p>
<pre><code class="java">/**
* 查询所有用户
* @return
*/
List&lt;User&gt; findAll();
</code></pre>
<p>映射配置：</p>
<pre><code class="xml">&lt;!-- 配置查询所有操作 --&gt;
&lt;select id=&quot;findAll&quot; resultType=&quot;uestc.zhangkx.domain.User&quot;&gt;
select * from user
&lt;/select&gt;
</code></pre>
<p>测试方法：</p>
<pre><code class="java">@Test
public void testFindAll() &#123;
    List&lt;User&gt; users = userDao.findAll();
    for(User user : users) &#123;
        System.out.println(user);
    &#125;
&#125;
</code></pre>
<p>测试结果：</p>
<p><img src="1585821351024.png" alt="1585821351024"></p>
<p>为什么名称会有值呢?</p>
<p><strong>因为:mysql 在 windows 系统中不区分大小写!</strong></p>
<hr>
<p>修改映射配置：使用别名查询</p>
<pre><code class="xml">&lt;!-- 配置查询所有操作 --&gt;
&lt;select id=&quot;findAll&quot; resultType=&quot;uestc.zhangkx.domain.User&quot;&gt;
    select id as userId,username as userName,birthday as userBirthday,
    sex as userSex,address as userAddress from user
&lt;/select&gt;
</code></pre>
<p>运行结果:</p>
<p><img src="1585821563448.png" alt="1585821563448"></p>
<p>如果我们的查询很多,都使用别名的话写起来岂不是很麻烦，我们还有更好的办法！</p>
<h2 id="resultMap-结果类型"><a href="#resultMap-结果类型" class="headerlink" title="resultMap 结果类型"></a>resultMap 结果类型</h2><p>``resultMap 标签可以建立查询的列名和实体类的属性名称不一致时建立对应关系。从而实现封装。<br>在 <code>select</code> 标签中使用 <code>resultMap</code> 属性指定引用即可。同时 <code>resultMap</code> 可以实现将查询结果映射为复杂类型的 <code>pojo</code>,比如在查询结果映射对象中包括 <code>pojo</code> 和 <code>list</code> 实现一对一查询和一对多查询。</p>
<h3 id="定义-resultMap"><a href="#定义-resultMap" class="headerlink" title="定义 resultMap"></a>定义 resultMap</h3><pre><code class="xml">&lt;!-- 建立 User 实体和数据库表的对应关系
type 属性:指定实体类的全限定类名
id 属性:给定一个唯一标识,是给查询 select 标签引用用的。
--&gt;
&lt;resultMap type=&quot;uestc.zhangkx.domain.User&quot; id=&quot;userMap&quot;&gt;
    &lt;id column=&quot;id&quot; property=&quot;userId&quot;/&gt;
    &lt;result column=&quot;username&quot; property=&quot;userName&quot;/&gt;
    &lt;result column=&quot;sex&quot; property=&quot;userSex&quot;/&gt;
    &lt;result column=&quot;address&quot; property=&quot;userAddress&quot;/&gt;
    &lt;result column=&quot;birthday&quot; property=&quot;userBirthday&quot;/&gt;
&lt;/resultMap&gt;
</code></pre>
<p>id 标签:用于指定主键字段<br>result 标签:用于指定非主键字段<br>column 属性:用于指定数据库列名<br>property 属性:用于指定实体类属性名称</p>
<h3 id="映射配置"><a href="#映射配置" class="headerlink" title="映射配置"></a>映射配置</h3><pre><code class="xml">&lt;!-- 配置查询所有操作 --&gt;
&lt;select id=&quot;findAll&quot; resultMap=&quot;userMap&quot;&gt;
    select * from user
&lt;/select&gt;
</code></pre>
<h3 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h3><pre><code class="java">@Test
public void testFindAll() &#123;
    List&lt;User&gt; users = userDao.findAll();
    for(User user : users) &#123;
        System.out.println(user);
    &#125;
&#125;
</code></pre>
<p><strong>运行结果:</strong></p>
<p><img src="1585821805692.png" alt="1585821805692"></p>
<h1 id="Mybatis-传统-DAO-层开发"><a href="#Mybatis-传统-DAO-层开发" class="headerlink" title="Mybatis 传统 DAO 层开发"></a>Mybatis 传统 DAO 层开发</h1><p>使用 Mybatis 开发 Dao,通常有两个方法,即<code>原始 Dao 开发方式</code>和 <code>Mapper 接口代理开发方式</code>。而现在主流的开发方式是接口代理开发方式,这种方式总体上更加简便。但还是介绍一下Dao开发方式。</p>
<h2 id="持久层-Dao-接口"><a href="#持久层-Dao-接口" class="headerlink" title="持久层 Dao 接口"></a>持久层 Dao 接口</h2><pre><code class="java">/**
*
* &lt;p&gt;Title: IUserDao&lt;/p&gt;
* &lt;p&gt;Description: 用户的业务层接口&lt;/p&gt;
*/
public interface IUserDao &#123;
    /**
* 查询所有用户
* @return
*/
    List&lt;User&gt; findAll();
    /**
* 根据 id 查询
* @param userId
* @return
*/
    User findById(Integer userId);
    /**
* 保存用户
* @param user
* @return
 影响数据库记录的行数
*/
    int saveUser(User user);
    /**
* 更新用户
* @param user
* @return 影响数据库记录的行数
*/
    int updateUser(User user);
    /**
* 根据 id 删除用户
* @param userId
* @return
*/
    int deleteUser(Integer userId);
&#125;
/**
* 查询总记录条数
* @return
*/
int findTotal();
</code></pre>
<h2 id="持久层-Dao-实现类"><a href="#持久层-Dao-实现类" class="headerlink" title="持久层 Dao 实现类"></a>持久层 Dao 实现类</h2><pre><code class="java">/**
*
* &lt;p&gt;Title: UserDaoImpl&lt;/p&gt;
* &lt;p&gt;Description: dao 的实现类&lt;/p&gt;
*/
public class UserDaoImpl implements IUserDao &#123;
    private SqlSessionFactory factory;
    public UserDaoImpl(SqlSessionFactory factory) &#123;
        this.factory = factory;
    &#125;
    @Override
    public List&lt;User&gt; findAll() &#123;
        SqlSession session = factory.openSession();
        List&lt;User&gt; users = session.selectList(&quot;uestc.zhangkx.dao.IUserDao.findAll&quot;);
        session.close();
        return users;
    &#125;
    @Override
    public User findById(Integer userId) &#123;
        SqlSession session = factory.openSession();
        User user = session.selectOne(&quot;uestc.zhangkx.dao.IUserDao.findById&quot;,userId);
        session.close();
        return user;
    &#125;
    @Override
    public int saveUser(User user) &#123;
        SqlSession session = factory.openSession();
        int res = session.insert(&quot;uestc.zhangkx.dao.IUserDao.saveUser&quot;,user);
        session.commit();
        session.close();
        return res;
    &#125;
    @Override
    public int updateUser(User user) &#123;
        SqlSession session = factory.openSession();
        int res = session.update(&quot;uestc.zhangkx.dao.IUserDao.updateUser&quot;,user);
        session.commit();
        session.close();
        return res;
    &#125;
    @Override
    public int deleteUser(Integer userId) &#123;
        SqlSession session = factory.openSession();
        int res = session.delete(&quot;uestc.zhangkx.dao.IUserDao.deleteUser&quot;,userId);
        session.commit();
        session.close();
        return res;
    &#125;
    @Override
    public int findTotal() &#123;
        SqlSession session = factory.openSession();
        int res = session.selectOne(&quot;uestc.zhangkx.dao.IUserDao.findTotal&quot;);
        session.close();
        return res;
    &#125;
&#125;
</code></pre>
<h2 id="持久层映射配置"><a href="#持久层映射配置" class="headerlink" title="持久层映射配置"></a>持久层映射配置</h2><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE mapper
PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;uestc.zhangkx.dao.IUserDao&quot;&gt;
    &lt;!-- 配置查询所有操作 --&gt;
    &lt;select id=&quot;findAll&quot; resultType=&quot;uestc.zhangkx.domain.User&quot;&gt;
        select * from user
    &lt;/select&gt;
    &lt;!-- 根据 id 查询 --&gt;
    &lt;select id=&quot;findById&quot; resultType=&quot;uestc.zhangkx.domain.User&quot; parameterType=&quot;int&quot;&gt;
        select * from user where id = #&#123;uid&#125;
    &lt;/select&gt;
    &lt;!-- 保存用户 --&gt;
    &lt;insert id=&quot;saveUser&quot; parameterType=&quot;uestc.zhangkx.domain.User&quot;&gt;
        &lt;!-- 配置保存时获取插入的 id --&gt;
        &lt;selectKey keyColumn=&quot;id&quot; keyProperty=&quot;id&quot; resultType=&quot;int&quot;&gt;
            select last_insert_id();
        &lt;/selectKey&gt;
        insert into user(username,birthday,sex,address) values(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)
    &lt;/insert&gt;
    &lt;!-- 更新用户 --&gt;
    &lt;update id=&quot;updateUser&quot; parameterType=&quot;uestc.zhangkx.domain.User&quot;&gt;
        update user set username=#&#123;username&#125;,birthday=#&#123;birthday&#125;,sex=#&#123;sex&#125;,address=#&#123;address&#125; where id=#&#123;id&#125;
    &lt;/update&gt;
    &lt;!-- 删除用户 --&gt;
    &lt;delete id=&quot;deleteUser&quot; parameterType=&quot;java.lang.Integer&quot;&gt;
        delete from user where id = #&#123;uid&#125;
    &lt;/delete&gt;
    &lt;!-- 查询总记录条数 --&gt;
    &lt;select id=&quot;findTotal&quot; resultType=&quot;int&quot;&gt;
        select count(*) from user;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<h2 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h2><pre><code class="java">/**
*
* &lt;p&gt;Title: MybastisCRUDTest&lt;/p&gt;
* &lt;p&gt;Description: 测试 mybatis 的 crud 操作&lt;/p&gt;
*/
public class MybastisCRUDTest &#123;
    private InputStream in ;
    private SqlSessionFactory factory;
    private IUserDao userDao;
    @Test
    public void testFindAll() &#123;
        List&lt;User&gt; users = userDao.findAll();
        for(User user : users) &#123;
            System.out.println(user);
        &#125;
    &#125;
    @Test
    public void testFindOne() &#123;
        //6.执行操作
        User user = userDao.findById(56);
        System.out.println(user);
    &#125;
    @Test
    public void testSaveUser() throws Exception &#123;
        User user = new User();
        user.setUsername(&quot;mybatis dao user&quot;);
        //6.执行操作
        int res = userDao.saveUser(user);
        System.out.println(res);
        System.out.println(user.getId());
        @Test
        public void testUpdateUser()throws Exception&#123;
            //1.根据 id 查询
            User user = userDao.findById(41);
            //2.更新操作
            user.setAddress(&quot;北京市顺义区&quot;);
            int res = userDao.updateUser(user);
            System.out.println(res);
        &#125;
        @Test
        public void testDeleteUser() throws Exception &#123;
            //6.执行操作
            int res = userDao.deleteUser(56);
            System.out.println(res);
        &#125;
        @Test
        public void testFindTotal() throws Exception &#123;
            //6.执行操作
            int res = userDao.findTotal();
            System.out.println(res);
        &#125;
        @Before//在测试方法执行之前执行
        public void init()throws Exception &#123;
            //1.读取配置文件
            in = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;);
            //2.创建构建者对象
            SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();
            //3.创建 SqlSession 工厂对象
            factory = builder.build(in);
            //4.创建 Dao 接口的实现类
            userDao = new UserDaoImpl(factory);
        &#125;
        @After//在测试方法执行完成之后执行
        public void destroy() throws Exception&#123;

            //7.释放资源
            in.close();
        &#125;
    &#125;
</code></pre>
<h1 id="SqlMapConfig-xml配置文件"><a href="#SqlMapConfig-xml配置文件" class="headerlink" title="SqlMapConfig.xml配置文件"></a>SqlMapConfig.xml配置文件</h1><h2 id="配置内容"><a href="#配置内容" class="headerlink" title="配置内容"></a>配置内容</h2><h3 id="SqlMapConfig-xml-中配置的内容和顺序"><a href="#SqlMapConfig-xml-中配置的内容和顺序" class="headerlink" title="SqlMapConfig.xml 中配置的内容和顺序"></a>SqlMapConfig.xml 中配置的内容和顺序</h3><pre><code>-properties(属性)
    --property
-settings(全局配置参数)
    --setting
-typeAliases(类型别名)
    --typeAliase
    --package
-typeHandlers(类型处理器)
-objectFactory(对象工厂)
-plugins(插件)
-environments(环境集合属性对象)
    --environment(环境子属性对象)
        ---transactionManager(事务管理)
        ---dataSource(数据源)
-mappers(映射器)
    --mapper
    --package
</code></pre>
<h2 id="properties-属性"><a href="#properties-属性" class="headerlink" title="properties(属性)"></a>properties(属性)</h2><p>在使用 properties 标签配置时,我们可以采用两种方式指定属性配置。</p>
<p>在resource下写db.properties文件：</p>
<pre><code class="properties">jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/mybatis
jdbc.username=root
jdbc.password=0217
</code></pre>
<p>这时，配置映射可以引用properties文件：</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;properties resourse=&quot;db.properties&quot;&gt;
    &lt;/properties&gt;    
    &lt;environments default=&quot;mysql&quot;&gt;
        &lt;environment id=&quot;mysql&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;&gt;

            &lt;/transactionManager&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;uestc/zhangkx/dao/UserMapper.xml&quot;&gt;&lt;/mapper&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
<p>resource属性——resource=”jdbcConfig.properties”<br>url 属性——url=file:///D:/IdeaProjects/day02_eesy_01mybatisCRUD/src/main/resources/jdbcConfig.prop<br>erties</p>
<blockquote>
<p>URL: Uniform Resource Locator 统一资源定位符<br><a target="_blank" rel="noopener" href="http://localhost:8080/mystroe/CategoryServlet">http://localhost:8080/mystroe/CategoryServlet</a><br>URI:Uniform Resource Identifier 统一资源标识符<br>/mystroe/CategoryServlet</p>
</blockquote>
<h2 id="typeAliases-类型别名"><a href="#typeAliases-类型别名" class="headerlink" title="typeAliases(类型别名)"></a>typeAliases(类型别名)</h2><p>在 SqlMapConfig.xml 中配置:</p>
<pre><code class="xml">&lt;typeAliases&gt;
    &lt;!-- 单个别名定义 --&gt;
    &lt;typeAlias alias=&quot;user&quot; type=&quot;com.itheima.domain.User&quot;/&gt;
    &lt;!-- 批量别名定义,扫描整个包下的类,别名为类名(首字母大写或小写都可以) --&gt;
    &lt;package name=&quot;com.itheima.domain&quot;/&gt;
    &lt;package name=&quot; 其它包&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre>
<h2 id="mappers-映射器"><a href="#mappers-映射器" class="headerlink" title="mappers(映射器)"></a>mappers(映射器)</h2><p><strong>&lt;mapper resource=” “ /&gt;</strong></p>
<p>使用相对于类路径的资源<br>如:&lt;mapper resource=”com/itheima/dao/IUserDao.xml” /&gt;</p>
<p><strong>&lt;mapper class=” “ /&gt;</strong><br>使用 mapper 接口类路径<br>如:&lt;mapper class=”com.itheima.dao.UserDao”/&gt;<br>注意:此种方法要求 mapper 接口名称和 mapper 映射文件名称相同,且放在同一个目录中。</p>
<p><strong>&lt;package name=””/&gt;</strong><br>注册指定包下的所有 mapper 接口<br>如:&lt;package name=”cn.itcast.mybatis.mapper”/&gt;<br>注意:此种方法要求 mapper 接口名称和 mapper 映射文件名称相同,且放在同一个目录中。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/java/" rel="tag"># java</a>
              <a href="/tags/%E5%8F%8D%E5%B0%84/" rel="tag"># 反射</a>
              <a href="/tags/JDBC/" rel="tag"># JDBC</a>
              <a href="/tags/mybatis/" rel="tag"># mybatis</a>
              <a href="/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" rel="tag"># 代理模式</a>
              <a href="/tags/%E6%98%A0%E5%B0%84/" rel="tag"># 映射</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/03/27/mybatis-2-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89mybatis/" rel="prev" title="mybatis#2-源码分析、自定义mybatis">
      <i class="fa fa-chevron-left"></i> mybatis#2-源码分析、自定义mybatis
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/03/29/%E8%B7%B3%E8%A1%A8%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/" rel="next" title="跳表的介绍与使用">
      跳表的介绍与使用 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9E%E9%A1%BE%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B5%81%E7%A8%8B"><span class="nav-text">回顾自定义流程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B"><span class="nav-text">流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4"><span class="nav-text">环境搭建步骤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E4%BB%A3%E7%90%86-Dao-%E5%AE%9E%E7%8E%B0-CRUD-%E6%93%8D%E4%BD%9C"><span class="nav-text">基于代理 Dao 实现 CRUD 操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE-ID-%E6%9F%A5%E8%AF%A2"><span class="nav-text">根据 ID 查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82%E6%8E%A5%E5%8F%A3"><span class="nav-text">持久层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">映射配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95"><span class="nav-text">测试方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C"><span class="nav-text">保存操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82%E6%8E%A5%E5%8F%A3-1"><span class="nav-text">持久层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-1"><span class="nav-text">映射配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95-1"><span class="nav-text">测试方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%89%A9%E5%B1%95-%E6%96%B0%E5%A2%9E%E7%94%A8%E6%88%B7-id-%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-text">问题扩展:新增用户 id 的返回值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E6%9B%B4%E6%96%B0"><span class="nav-text">用户更新</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82%E6%8E%A5%E5%8F%A3-2"><span class="nav-text">持久层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-2"><span class="nav-text">映射配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95-2"><span class="nav-text">测试方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E5%88%A0%E9%99%A4"><span class="nav-text">用户删除</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82%E6%8E%A5%E5%8F%A3-3"><span class="nav-text">持久层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-3"><span class="nav-text">映射配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95-3"><span class="nav-text">测试方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="nav-text">用户模糊查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82%E6%8E%A5%E5%8F%A3-4"><span class="nav-text">持久层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-4"><span class="nav-text">映射配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95-4"><span class="nav-text">测试方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A5%E5%85%85"><span class="nav-text">补充</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="nav-text">模糊查询的另一种配置方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8E-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">#{}与${}的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E7%9A%84-value-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="nav-text">模糊查询的${value}源码分析</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E4%BD%BF%E7%94%A8%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-text">查询使用聚合函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82%E6%8E%A5%E5%8F%A3-5"><span class="nav-text">持久层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-5"><span class="nav-text">映射配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95-5"><span class="nav-text">测试方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mybatis-%E4%B8%8E-JDBC-%E7%BC%96%E7%A8%8B%E7%9A%84%E6%AF%94%E8%BE%83"><span class="nav-text">Mybatis 与 JDBC 编程的比较</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mybatis-%E7%9A%84%E8%BE%93%E5%85%A5%E5%8F%82%E6%95%B0%E6%B7%B1%E5%85%A5"><span class="nav-text">Mybatis 的输入参数深入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#parameterType-%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="nav-text">parameterType 配置参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="nav-text">使用说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E9%80%92-pojo-%E5%8C%85%E8%A3%85%E5%AF%B9%E8%B1%A1"><span class="nav-text">传递 pojo 包装对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E5%86%99-QueryVo"><span class="nav-text">编写 QueryVo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82%E6%8E%A5%E5%8F%A3-6"><span class="nav-text">持久层接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-6"><span class="nav-text">映射配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E5%8C%85%E8%A3%85%E7%B1%BB"><span class="nav-text">测试包装类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mybatis-%E7%9A%84%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E5%B0%81%E8%A3%85"><span class="nav-text">Mybatis 的输出结果封装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#resultType-%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B"><span class="nav-text">resultType 配置结果类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E7%A4%BA%E4%BE%8B"><span class="nav-text">基本类型示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Integer"><span class="nav-text">Integer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#User"><span class="nav-text">User</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B%E7%A4%BA%E4%BE%8B"><span class="nav-text">特殊类型示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="nav-text">修改实体类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#resultMap-%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B"><span class="nav-text">resultMap 结果类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89-resultMap"><span class="nav-text">定义 resultMap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE"><span class="nav-text">映射配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"><span class="nav-text">测试结果</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mybatis-%E4%BC%A0%E7%BB%9F-DAO-%E5%B1%82%E5%BC%80%E5%8F%91"><span class="nav-text">Mybatis 传统 DAO 层开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82-Dao-%E6%8E%A5%E5%8F%A3"><span class="nav-text">持久层 Dao 接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82-Dao-%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="nav-text">持久层 Dao 实现类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%B1%82%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE"><span class="nav-text">持久层映射配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="nav-text">测试类</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SqlMapConfig-xml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">SqlMapConfig.xml配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%86%85%E5%AE%B9"><span class="nav-text">配置内容</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SqlMapConfig-xml-%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E9%A1%BA%E5%BA%8F"><span class="nav-text">SqlMapConfig.xml 中配置的内容和顺序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#properties-%E5%B1%9E%E6%80%A7"><span class="nav-text">properties(属性)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#typeAliases-%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D"><span class="nav-text">typeAliases(类型别名)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mappers-%E6%98%A0%E5%B0%84%E5%99%A8"><span class="nav-text">mappers(映射器)</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="摘星"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">摘星</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">241</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">139</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zhangkexuan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zhangkexuan" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/kexuan_zhang@qq.com" title="E-Mail → kexuan_zhang@qq.com"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">摘星</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>

<!-- ҳ����С���� -->
<script type="text/javascript" src="/js/clicklove.js"></script>
